<!doctype html>
<head>
	<meta charset="utf-8">
	<link href="css/normalize.css" rel="stylesheet">
	<link href="css/style.css" rel="stylesheet">
	<link href="//code.jquery.com/ui/1.10.3/themes/cupertino/jquery-ui.css" rel="stylesheet">

	<script src="js/jquery-1.9.1.js"></script>
	<script src="//code.jquery.com/ui/1.10.3/jquery-ui.js"></script>
    <script src="js/handlebars-1.0.0.js"></script>
	<script src="js/ember_debug.js"></script>
	<script src="js/ember-data.js"></script>
	<script src="js/selector.js"></script>
	<script src="js/app.js"></script>
	<script src="js/models.js"></script>
	<script src="js/routes.js"></script>
	<script src="js/views.js"></script>
	<script src="js/controllers.js"></script>
	
</head>
<body>	

<!-- Main template -->
<script type="text/x-handlebars">
	<div id="toolbar">
		<div id="tab-navigator">
			<div style='text-align: center; width:100%; margin-bottom:20px'>
				<h3>Scrapinghub AutoScraping v0.1</h3>
			</div>
			{{view JQ.TabNavigator templateName="tab-navigator-template"}}
		</div>
		<div id="toolbar-container" class="ui-corner-all">
			{{outlet}}
		</div>
	</div>
	{{view ASTool.AnnotatedDocumentView}}
</script>

<!-- Navigation bar template -->
<script type="text/x-handlebars" id="tab-navigator-template">
	<form align="center">
	  <div id="radio">
	    <input {{action "gotoPageSelection" this}} type="radio" id="pageRadio" name="radio" /><label for="pageRadio">Page</label>
	    <input {{action "gotoAnnotations" this}} type="radio" id="annotationsRadio" name="radio"/><label for="annotationsRadio">Annotations</label>
	    <input {{action "gotoItems" this}} type="radio" id="itemsRadio" name="radio" /><label for="itemsRadio">Items</label>
	  </div>
	</form>
</script>

<!-- Annotated document view -->
<script type="text/x-handlebars" id="annotated-document-view">
	<div id="scraped-doc">
		<iframe id="scraped-doc-iframe" src="start.html"> </iframe>
		<canvas id="infocanvas"></canvas>
		<div id="hoveredInfo"></div>
	</div>
</script>

<!-- Select page template -->
<script type="text/x-handlebars" id="page">
	<div id="url-selector">
		<div style='width: 100%; text-align:center'>
			<h3>Start url:</h3>
			{{view JQ.TextField value=navigateToUrl id="pageUrl" class="textarea"}}
			<br/>
			{{view JQ.ButtonView action="loadPage" label="Go!" id="goButton"}}
		</div>
	</div>
</script>

<!-- Annotations list -->
<script type="text/x-handlebars" id="annotations">
	<div style='text-align: center; width:100%;'>
		<h3>Annotations for {{currentPage}}</h3>
		<hr/>
		{{#each model}}
			<div style="margin-bottom: 5px">
				{{view JQ.ButtonView action="editAnnotation" argument=this label=name}}
				{{view JQ.ButtonView action="deleteAnnotation" argument=this icon="ui-icon-trash" label="x" text=false}}
			</div>
			{{else}}
				<h4>No annotations have been defined yet.
		{{/each}}
		<hr/>
		<div style="margin-top:20px">
			{{view JQ.ButtonView action="addAnnotation" icon="ui-icon-circle-plus" label="x" text=false}}
		</div>
	</div>
</script>


<!-- Edit annotation template -->
<script type="text/x-handlebars" id="annotation">
	<div style="text-align: center">
	<h3>Edit annotation</h3>
	{{view JQ.TextField value=name class="textarea"}}
	<div style="margin-top:25px"/>
	{{#if path}}
		<h3>Selected element attributes:</h3>
	{{else}}
		<h4>Please select an element from the document.</h4>
	{{/if}}
	
		{{#each mappedAttributes}}
			<p class="elementAttribute">{{view ASTool.ElemAttributeView mapped=true attribute=this}}</p>
		{{/each}}
		{{#each unmappedAttributes}}
			<p class="elementAttribute">{{view ASTool.ElemAttributeView attribute=this}}</p>
		{{/each}}
	
	<hr/>
	{{#if element}}
		{{view JQ.ButtonView action="doneEditing" argument=model label="Save"}}
	{{else}}
		{{view JQ.ButtonView action="cancelEdit" argument=model label="Cancel"}}
	{{/if}}
	</div>
	
</script>


<!-- Items list -->
<script type="text/x-handlebars" id="items">
	{{#if mappingAttribute}}
		<h3>Choose an item field to map "{{mappingAttribute.name}}"</h3>
	{{else}}
		<h3>Items</h3>
	{{/if}}
	<hr/>
	{{#each model}}
		{{view ASTool.ItemView item=this mappingAttribute=controller.mappingAttribute}}
 	{{else}}
 		No items have been defined yet.
 	{{/each}}
	<hr/>
	{{my-button action="addItem" label="+"}}
</script>


<!-- Button component -->
<script type="text/x-handlebars" id="components/my-button">
      <button class="button">{{label}}</button>
</script>


<!-- Attribute view -->
<script type="text/x-handlebars" id="elem-attribute">
	<hr/>
	<p>
		<span class="elementAttributeName">{{view.attribute.name}}</span>
			{{view JQ.ButtonView action="mapAttribute" class="mapButton" argument=view.attribute icon=" ui-icon-arrowthick-2-e-w" label="x" text=false}}
		<span><strong>
		{{#if view.mapped}}
			<span class="mapping">
				{{view.attribute.mappedField}}
			</span>
		{{/if}}
		</span></strong>
	</p>
	<p class="elementAttributeValue">{{trim view.attribute.value}}</p>
</script>


<!-- Item View -->
<script type="text/x-handlebars" id="item">
	{{view ASTool.EditField editable=view.item value=view.item.name}}
	<button class="button map-button" {{action "addField" this}}>+</button>
	<div style="margin:10px 0px 10px 30px;">
		{{#if view.item.fields}}
			<table>
				<tr> <td>Name</td> <td>Type</td> <td>Required</td> <td>Vary</td> </tr>
				{{#each view.item.fields}}
					<tr>
						<td>{{view ASTool.EditField owner=this value=name}}</td>
						<td>{{view ASTool.TypeSelect owner=this selection=type}}</td>
						<td>{{view ASTool.EditBox owner=this checked=required}}</td>
						<td>{{view ASTool.EditBox owner=this checked=vary}}</td>
						{{#if view.mappingAttribute}}
							<td><button class="button map-button" {{action "chooseField" this}}>use</button></td>
							{{/if}}
					</tr>
				{{/each}}

				</table>
		{{else}}
			<div style="margin-top:10px; margin-left:20px;">No fields defined yet.</div>
		{{/if}}
	</div>
</script>




</body>